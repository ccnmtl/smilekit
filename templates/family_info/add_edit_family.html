{% extends "family_info/base.html" %}

{%load smartif%}

{% block family_info_js %}

{% endblock family_info_js %}

{% block family_info_content %}

	<h2 id="contenttitle">
		{% if family %}
		Family #{{family.study_id_number}}
		{%else %}
		New Family
		{%endif %}		
	</h2>

	{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}
	
	<div id="contentnav">
		<a id="left" href = "/family_info/families">&larr; Back</a>
	</div>

	{% if family %}
	<form id="edit_family" action="/family_info/edit_family/{{family.id}}" method="post">
	{% else %}
	<form id="add_family" action="/family_info/insert_family" method="post">
	{% endif %}   
      <fieldset>
      
	<legend>
	Family Details
	</legend>
	
      <fieldset>
	<legend>
	Study Information
	</legend>
	
	<table class="editdetails">
	
		<tr>
			<th>Study ID Number</th>
			<td><input type="text"  name="study_id_number"  value="{{family.study_id_number}}" /></td>
		</tr>

		<tr>
			<th>Set of Weights Used</th>
			<td>
			
				{% if not family.config_locked %}
				<select name = "config_id">
				{% for config in equation_balancer_configs %}
				<option value = "{{config.id}}"
				>{{config.name}}</option>
				{% endfor %}
				</select>
				{% else %}
				{{family.config.name}}
				{% endif %}

			</td>
		</tr>
		
		<tr>
			<th></th>
			<td><span class="prompt">(This cannot be changed once someone has started an interview with the family.)</span></td>
		</tr>
      
		<!--
		<tr>
		<td>Family's last name:</td>
		<td><input type="text" name="family_last_name" value="{{family.family_last_name}}" /></td>
		</tr>
		
		<tr>
		<td>Child's last name:</td>
		<td><input type="text"  name="child_last_name" value="{{family.child_last_name}}" /></td>
		</tr>
		
		<tr>
		<td>Child's first name:</td>
		<td><input type="text"  name="child_first_name" value="{{family.child_first_name}}" /></td>
		</tr>
		-->
		
		
		<tr>
			<th>Child's Approximate Year of Birth</th>
			<td><input type="text" name="child_year_of_birth" 
			{%if family.child_year_of_birth%}
			  value="{{family.child_year_of_birth}}" 
			{%endif%}
			/></td>
		</tr>

		{% if family %}
		<tr>
			<th>Current Family Visit Status</th>
			<td>
			<input type="radio" name="active" value="True"  {% if family.active %}checked{%endif %}>Actively Visiting
			<input type="radio" name="active" value="False" {% if not family.active%}checked{%endif %}> Not Visiting
			</td>
		</tr>
		<tr>
			<th></th>
			<td><span class="prompt">(Check the "inactive" button to "delete" a family.)</span></td>
		</tr>
		{% endif %}
		
  
	</table>
	
      </fieldset>
      <fieldset>
	<legend>
	Demographic Information
	</legend>
		
	<table class="editdetails">
		
		<tr>
		<th>Race or Ethnicity of Child</th>
				  <td>
          <select name = "race_ethnicity">
            {% for r_e_choice_k, r_e_choice_v in r_e_choices %}
                <option value = "{{r_e_choice_k}}"
                {%if family.race_ethnicity == r_e_choice_k%} selected {%endif%}
                >{{r_e_choice_v}}</option>
            {% endfor %}
          </select>
      </td>
		</tr>

		<tr>
		<th>Was the mother born in the USA?</th>
		<td>
        <input type="radio" name="mother_born_in_us" value="True"  {% if family.mother_born_in_us %}checked{%endif %}>Yes
        <input type="radio" name="mother_born_in_us" value="False" {% if not family.mother_born_in_us%}checked{%endif %}> No
      </td>
		</tr>

		<tr>
		<th>Did any child in the household receive food stamps in the past year?</th>
		  <td>
          <input type="radio" name="food_stamps_in_last_year" value="True"  {% if family.food_stamps_in_last_year %}checked{%endif %}>Yes
          <input type="radio" name="food_stamps_in_last_year" value="False" {% if not family.food_stamps_in_last_year%}checked{%endif %}> No
      </td>
		</tr>
		
		<tr>
		<th>Mother's highest level of education</th>
		<td>
          <select name = "highest_level_of_parent_education">
            {% for e_l_choice_k, e_l_choice_v in e_l_choices %}
                <option value = "{{e_l_choice_k}}"
                {%if family.highest_level_of_parent_education == e_l_choice_k%} selected {%endif%}
                >{{e_l_choice_v}}</option>
            {% endfor %}
          </select>
      </td>
		
		</tr>
		
		<tr>
        <td  colspan = "2" align="center">
          </td>
        </tr>
        
	</table>
	
      </fieldset>
      <div align="center" style="padding: 20px;">
            <input type="submit"
              value="{{ family|yesno:"Save Changes,Save"}}"
             /></div>
      </fieldset>
	</form>	
      
      <fieldset>
      
	<legend>
	Family Visits
	</legend>
		
	<table class="interviewdetails" cellspacing="0">
	
		<tr>
			<td class="toggle"><a href="#">&darr;</a></td>
			<td class="label">Date: 01/01/2011</td>
			<td>Health Worker: Raymond, Marc</td>
		</tr>
		
		<tr>
			<td>&nbsp;</td>
			<td class="label">Score</td>
			<td>100</td>
		</tr>
		
		<tr>
			<td>&nbsp;</td>
			<td class="label">Completion</td>
			<td>100% Completed</td>
		</tr>
		
		<tr>
			<td>&nbsp;</td>
			<td class="label">Goals</td>
			<td>
			<ol>
			<li>Strike first.</li>
			<li>Strike hard.</li>
			<li>No mercy.</li>
			<br />
			</ol>
			</td>
		</tr>
		
		<tr>
			<td class="toggle"><a href="#">&rarr;</a></td>
			<td class="label">Date: 01/01/2011</td>
			<td>Health Worker: Raymond, Marc</td>
		</tr>
		
		<tr>
			<td class="toggle"><a href="#">&rarr;</a></td>
			<td class="label">Date: 01/01/2011</td>
			<td>Health Worker: Raymond, Marc</td>
		</tr>
		
		  
	</table>
	
      </fieldset>
{% endblock family_info_content %}
